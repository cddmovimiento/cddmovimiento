<odoo>
  <data>
    <!-- account.move inherit form view -->
    <record id="view_task_form2_inherit" model="ir.ui.view">
        <field name="name">view.task.form2</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_assign_to_me']" position="after">
                <button name="action_report_domain" string="Imprimir bitÃ¡cora por fecha" type="object" class="oe_highlight" icon="fa-print"/>
            </xpath>

            <xpath expr="//page[@name='description_page']" position="after">
                <page name="binacle_page" string="Bitacora">
                    
                    <field name = "id" invisible = "1"/>
                    <field name="binacle_ids" context="{'default_parent_id_int': id}">
                        <tree editable="top">
                            <field name = "parent_id_int" invisible = "1" force_save="1"/>
                            <field name = "parent_id" invisible = "1"/>
                            <field name = "product_id" context="{'name_product_sale': parent_id_int}" />
<!--                            <field name = "description"/>-->
                            <field name = "date_init" required="1"/>
                            <field name = "date_end" required="1"/>
                            <field name ="delta"/>
                            <field name="odometer"/>
                            <field name="hourmeter"/>
                            <field name = "gruero_id" required="1" context="{'employee_sale': parent_id_int}" options="{'no_open':True, 'no_create': True}" domain="[('type_employee','=','gruero')]"/>
                            <field name = "support_id" required="1" context="{'employee_sale': parent_id_int}" options="{'no_open':True, 'no_create': True}" domain="[('type_employee','=','support')]"/>
                            <field name = "comment"/>
                        </tree>
                        
                    </field>
                </page>
                
                
            </xpath>
            <xpath expr="//form[1]/sheet[1]/group[1]/group[1]/field[@name='user_ids']" position="after">
                <field name="model_fleet_id"/>
                <field name="vehicle_id" domain="[('model_id','=',model_fleet_id)]"/>
                
                <separator string="Odometer Info" colspan="4" />

                <label for="start_odometer" />
                <div class="o_row">
                    <field name="start_odometer" readonly="True" force_save="1"/>
                    <field name="start_odometer_unit" readonly="True" force_save="1"/>
                </div>
                <label for="accumulated_odometer" />
                <div class="o_row">
                    <field name="accumulated_odometer" readonly="True"/>
                    <field name="start_odometer_unit" readonly="True" force_save="1"/>
                </div>
                <label for="end_odometer" />
                <div class="o_row">
                    <field name="end_odometer" readonly="True"/>
                    <field name="end_odometer_unit"/>
                </div>

                <separator string="Hourmeter Info" colspan="4" />

                <label for="start_hourmeter"/>
                <div class="o_row">
                    <field name="start_hourmeter" widget="float_time" readonly="True" force_save="1"/>
                    <field name="start_hourmeter_unit" readonly="True" force_save="1"/>
                </div>  
                <label for="accumulated_hourmeter" />
                <div class="o_row">
                    <field name="accumulated_hourmeter" widget='float_time' readonly="True"/>
                    <field name="start_hourmeter_unit" readonly="True" force_save="1"/>
                </div>
                <label for="end_hourmeter" />
                <div class="o_row">
                    <field name="end_hourmeter" readonly="True" widget="float_time"/>
                    <field name="end_hourmeter_unit"/>
                </div>
            </xpath>
        </field>
    </record>

    <record id="view_kanban_project_task_cddmovimiento" model="ir.ui.view">
        <field name="name">cdd_sale_fleet.project_task_kanban</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//kanban/templates/t/div/div/div/div" position="replace">
                <div class="o_kanban_record_headings">
                    <strong class="o_kanban_record_title">
                        <s t-if="!record.active.raw_value"><field name="name" widget="name_with_subtask_count"/></s>
                        <t t-else=""><field name="name" widget="name_with_subtask_count"/></t>
                    </strong>
                    <br/>
                    <t t-if="record.partner_id.value">
                        <span t-if="!record.partner_is_company.raw_value">
                            <field name="commercial_partner_id"/>
                        </span>
                        <span t-else="">
                            <field name="partner_id"/>
                        </span>
                    </t>
                    <t t-else="record.email_from.raw_value"><span><field name="email_from"/></span></t>
                    <t t-if="!record.is_private.raw_value">
                        <span invisible="context.get('default_project_id', False)"><br/><field name="project_id" required="1"/></span>
                    </t>
                    <t t-else="">
                        <br/>
                        <span class="fa fa-lock text-muted"/><span class="text-muted"> Private</span>
                    </t>
                </div>
            </xpath>
        </field>
    </record>

    <record id="industry_fsm_report.project_task_view_kanban_fsm_report" model="ir.ui.view">
        <field name="arch" type="xml">
            <xpath expr="//kanban" position="inside">
                <field name="worksheet_template_id" />
            </xpath>
            <xpath expr="//kanban/templates/t/div/div/div/div/t[1]" position="after">
                <t t-if="record.worksheet_template_id.raw_value">
                    <br />
                    <span>
                        <field name="worksheet_template_id"/>
                    </span>
                </t>
            </xpath>
        </field>
    </record>

  </data>
</odoo>


